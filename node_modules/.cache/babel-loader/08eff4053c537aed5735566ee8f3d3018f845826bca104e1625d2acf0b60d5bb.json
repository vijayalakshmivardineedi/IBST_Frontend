{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router';import{FaTrashAlt,FaStar}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookList=_ref=>{let{onDelete}=_ref;const navigate=useNavigate();const[books,setBooks]=useState([]);useEffect(()=>{fetchBooks();},[]);const fetchBooks=async()=>{try{const response=await axios.get('https://ibst.onrender.com/api/books');setBooks(response.data);}catch(error){console.error(\"Error fetching books:\",error);}};const handleDelete=async bookId=>{console.log(\"Deleting book with ID:\",bookId);try{const response=await axios.delete(`https://ibst.onrender.com/api/books/${bookId}`);setBooks(books.filter(book=>book._id!==bookId));alert(\"Book deleted successfully!\");console.log(\"Book deleted successfully:\",response.data);}catch(error){console.error(\"Error deleting book:\",error);alert(\"Error deleting book. Please try again.\");}};const handleClick=()=>{navigate('/add');};return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'blue'},className:\"text-2xl font-bold mb-4\",children:\"Books List\"}),/*#__PURE__*/_jsx(\"button\",{className:\"text-2xl font-bold mb-4\",onClick:handleClick,style:{backgroundColor:'blue',color:'white',height:50,width:80,borderRadius:10},children:\"Add Book\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'16px'},children:books.map(book=>/*#__PURE__*/_jsx(\"div\",{style:{width:'calc(25% - 16px)',// 4 items per row with a gap\nboxSizing:'border-box',marginBottom:'16px'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px',border:'1px solid #ddd',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"img\",{src:`https://ibst.onrender.com${book.image}`,alt:\"Book\",style:{width:'100%',height:'250px',borderRadius:'8px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'8px 0'},children:[/*#__PURE__*/_jsx(\"div\",{children:book.title}),/*#__PURE__*/_jsx(\"div\",{children:book.author})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',padding:'8px 0'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center'},children:Array.from({length:book.rating},(_,index)=>/*#__PURE__*/_jsx(FaStar,{style:{color:'gold',marginRight:'2px'}},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(book._id),style:{marginLeft:'10px',cursor:'pointer',border:'none',background:'transparent'},children:/*#__PURE__*/_jsx(FaTrashAlt,{style:{color:'red'}})})]})]})},book._id))})]});};export default BookList;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","FaTrashAlt","FaStar","jsx","_jsx","jsxs","_jsxs","BookList","_ref","onDelete","navigate","books","setBooks","fetchBooks","response","get","data","error","console","handleDelete","bookId","log","delete","filter","book","_id","alert","handleClick","style","backgroundColor","children","display","justifyContent","color","className","onClick","height","width","borderRadius","flexWrap","gap","map","boxSizing","marginBottom","padding","border","src","image","alt","title","author","alignItems","Array","from","length","rating","_","index","marginRight","marginLeft","cursor","background"],"sources":["C:/Users/vijju/OneDrive/Desktop/New folder/frontend/src/components/bookslist.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router';\r\nimport { FaTrashAlt, FaStar } from 'react-icons/fa';\r\n\r\nconst BookList = ({ onDelete }) => {\r\n  const navigate = useNavigate();\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchBooks();\r\n  }, []);\r\n\r\n  const fetchBooks = async () => {\r\n    try {\r\n      const response = await axios.get('https://ibst.onrender.com/api/books');\r\n      setBooks(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching books:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (bookId) => {\r\n    console.log(\"Deleting book with ID:\", bookId);\r\n  \r\n    try {\r\n      const response = await axios.delete(`https://ibst.onrender.com/api/books/${bookId}`);\r\n      \r\n      setBooks(books.filter(book => book._id !== bookId));\r\n      alert(\"Book deleted successfully!\");\r\n  \r\n      console.log(\"Book deleted successfully:\", response.data);\r\n    } catch (error) {\r\n      console.error(\"Error deleting book:\", error);\r\n      alert(\"Error deleting book. Please try again.\");\r\n    }\r\n  };\r\n  \r\n\r\n  const handleClick = () => {\r\n    navigate('/add');\r\n  };\r\n\r\n  return (\r\n    <div style={{ backgroundColor: \"\" }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between' }}>\r\n        <h2 style={{color:'blue'}} className=\"text-2xl font-bold mb-4\">Books List</h2>\r\n        <button\r\n          className=\"text-2xl font-bold mb-4\"\r\n          onClick={handleClick}\r\n          style={{backgroundColor:'blue', color:'white', height:50, width: 80, borderRadius:10}}\r\n        >\r\n          Add Book\r\n        </button>\r\n      </div>\r\n      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '16px' }}>\r\n        {books.map(book => (\r\n          <div\r\n            key={book._id}\r\n            style={{\r\n              width: 'calc(25% - 16px)', // 4 items per row with a gap\r\n              boxSizing: 'border-box',\r\n              marginBottom: '16px',\r\n            }}\r\n          >\r\n            <div style={{ padding: '10px', border: '1px solid #ddd', borderRadius: '8px' }}>\r\n              <img\r\n                src={`https://ibst.onrender.com${book.image}`}\r\n                alt=\"Book\"\r\n                style={{ width: '100%', height: '250px', borderRadius: '8px' }}\r\n              />\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', padding: '8px 0' }}>\r\n                <div>{book.title}</div>\r\n                <div>{book.author}</div>\r\n              </div>\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', padding: '8px 0' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                  {Array.from({ length: book.rating }, (_, index) => (\r\n                    <FaStar key={index} style={{ color: 'gold', marginRight: '2px' }} />\r\n                  ))}\r\n                </div>\r\n\r\n                <button\r\n                  onClick={() => handleDelete(book._id)} \r\n                  style={{ marginLeft: '10px', cursor: 'pointer', border: 'none', background: 'transparent' }}\r\n                >\r\n                  <FaTrashAlt style={{ color: 'red' }} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}